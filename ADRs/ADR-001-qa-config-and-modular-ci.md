# ADR-001: QA-конфиг и модульный CI без изменения продуктовой концепции

Status: Proposed
Date: 2025-09-04

## Context
- Требуется гибкость настроек QA/CI и тишина на ветке `audit`, без вмешательства в продуктовую логику.
- Исторические шрамы (CRIT-001/CRIT-002) и REDLINES требуют: не затирать ошибки, не выдавать PASS без артефактов, сохранять память.

## Decision
- Вводим `scripts/qa.config.json` + загрузчик `qa-load-config.ps1` и обёртку `qa-closeout-wrapper.ps1`; включаем ENV-оверрайды.
- Делим CI на условные модульные шаги: pytest/ruff/mypy/vitest/playwright запускаются только при наличии конфигурации/тестов; Docker — по флагу (workflow_dispatch) и не блокирует ран.
- Ветка `audit` — report-only, `paths-ignore` для артефактов, `continue-on-error: true`.
- Никаких изменений в API/UI/протоколах: продуктовая концепция и контракты неизменны.

## Non-goals
- Изменение контрактов API, SSE-формата, UI-функций и SLA — вне области решения.

## Consequences
- + Управляемость, меньше шума, повторяемость окружений.
- 0 Риск для продукта: дефолтное поведение совпадает с текущим.

## Rollback
- Удаление обёртки/конфига/условий CI не затрагивает продуктовый код и легко откатывается.
